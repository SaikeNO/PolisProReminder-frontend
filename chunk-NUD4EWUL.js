import{a as M}from"./chunk-M6ZYS3KI.js";import"./chunk-YI64LF7D.js";import{a as N,b as O,c as Z,d as H,e as K,f as Q,g as W,i as X}from"./chunk-YAVUS4SE.js";import{a as ge}from"./chunk-SL2S6R6I.js";import{a as ie,b as ne,c as oe,d as ae,e as re,f as se,g as me,h as le}from"./chunk-NFT5YCZS.js";import{b as de,c as fe}from"./chunk-2DC7NVQR.js";import{a as ye,b as Te}from"./chunk-2TEN6ZUP.js";import"./chunk-Z65746U3.js";import{a as V,b as z,d as P,f as g,h as $,i as B,k as G,n as R,o as U,p as q,r as J,s as ce,x as pe,y as ue}from"./chunk-IIFEEIO4.js";import{ua as Y,va as ee,wa as te,xa as I}from"./chunk-MLNSEME7.js";import{l as A}from"./chunk-JOIIREXN.js";import{$b as y,Eb as D,Gb as b,H as p,Ka as h,La as _,Lb as x,N as u,Nb as E,Ob as S,Pb as o,Qb as a,Rb as f,Vb as w,bc as v,jc as r,kc as L,mb as m,nb as C,rc as T,sa as l,tc as k,uc as j,y as F,za as d}from"./chunk-WRJUXR2E.js";function _e(n,i){n&1&&r(0," Edytuj Typ Ubezpieczenia ")}function Ce(n,i){n&1&&r(0," Dodaj Typ Ubezpieczenia ")}function De(n,i){n&1&&r(0," Zapisz ")}function be(n,i){n&1&&r(0," Dodaj ")}var Ie=(()=>{let i=class i{constructor(e,t){this.dialogRef=e,this.data=t,this.insuranceTypesFacade=l(M),this.fb=l(q),this.isEditing=!1,this.insuranceTypeId=null,this.form=this.fb.nonNullable.group({name:["",[g.minLength(3),g.maxLength(100),g.required]]}),this.initialInsuranceType=null,this.initialInsuranceType=t.insuranceType,this.form.controls.name.setValue(t.insuranceType?t.insuranceType.name:""),this.isEditing=!!t.insuranceType,this.insuranceTypeId=t.insuranceType?t.insuranceType.id:null}ngOnInit(){this.dialogRef.afterClosed().pipe(p(e=>e&&e.valid),F(e=>this.mapToCreateInsuranceInsuranceType(e)),u(1)).subscribe(e=>this.isEditing&&this.insuranceTypeId?this.insuranceTypesFacade.editInsuranceType(e,this.insuranceTypeId):this.insuranceTypesFacade.createInsuranceType(e))}isSubmitDisabled(){return this.form.invalid||this.initialInsuranceType?.name===this.form.controls.name.value}mapToCreateInsuranceInsuranceType(e){return{name:e.controls.name.value}}};i.\u0275fac=function(t){return new(t||i)(C(ie),C(ne))},i.\u0275cmp=d({type:i,selectors:[["app-insurance-insurance-types-dialog"]],standalone:!0,features:[T],decls:15,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"form-field"],["matInput","","formControlName","name","cdkFocusInitial",""],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(t,s){t&1&&(o(0,"h2",0),D(1,_e,1,0)(2,Ce,1,0),a(),o(3,"mat-dialog-content")(4,"form",1)(5,"mat-form-field",2)(6,"mat-label"),r(7,"Nazwa"),a(),f(8,"input",3),a()()(),o(9,"mat-dialog-actions")(10,"button",4),r(11,"Anuluj"),a(),o(12,"button",5),D(13,De,1,0)(14,be,1,0),a()()),t&2&&(m(),x(1,s.isEditing?1:2),m(3),b("formGroup",s.form),m(8),b("mat-dialog-close",s.form)("disabled",s.isSubmitDisabled()),m(),x(13,s.isEditing?13:14))},dependencies:[le,ae,re,me,se,ue,pe,ce,fe,de,I,Y,J,G,P,$,B,R,U],styles:[".form-field[_ngcontent-%COMP%]{width:100%}"]});let n=i;return n})();var xe=(n,i)=>i.id;function ve(n,i){if(n&1){let c=w();o(0,"mat-list-item")(1,"div",2)(2,"button",3),y("click",function(){let t=h(c).$implicit,s=v();return _(s.deleteInsuranceType(t))}),o(3,"mat-icon"),r(4,"delete"),a()(),o(5,"button",4),y("click",function(){let t=h(c).$implicit,s=v();return _(s.openDialog(t))}),o(6,"mat-icon"),r(7,"edit"),a()()(),o(8,"span",5),r(9),a(),o(10,"span",6),r(11,"Podstawowy"),a()(),f(12,"mat-divider")}if(n&2){let c=i.$implicit;m(9),L(c.name)}}var rt=(()=>{let i=class i{constructor(){this.insuranceTypesFacade=l(M),this.dialog=l(oe),this.insruranceTypes$=this.insuranceTypesFacade.insuranceTypes$}ngOnInit(){this.insuranceTypesFacade.getInsuranceTypes()}openDialog(e){this.dialog.open(Ie,{data:{insuranceType:e}})}deleteInsuranceType(e){this.dialog.open(ge,{data:{name:e.name},width:"500px"}).afterClosed().pipe(p(s=>s),u(1)).subscribe(()=>this.insuranceTypesFacade.deleteInsuranceType(e.id))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=d({type:i,selectors:[["app-insurance-types"]],standalone:!0,features:[T],decls:11,vars:2,consts:[[1,"top-container"],["mat-raised-button","","color","primary",3,"click"],["matListItemIcon",""],["mat-icon-button","","color","warn","matTooltip","Usu\u0144",3,"click"],["mat-icon-button","","matTooltip","Edytuj",3,"click"],["matListItemTitle",""],["matListItemLine",""]],template:function(t,s){t&1&&(o(0,"div",0)(1,"h1"),r(2,"Typy ubezpiecze\u0144"),a(),o(3,"a",1),y("click",function(){return s.openDialog()}),o(4,"mat-icon"),r(5,"add"),a(),r(6," Dodaj "),a()(),o(7,"mat-list"),E(8,ve,13,1,null,null,xe),k(10,"async"),a()),t&2&&(m(8),S(j(10,0,s.insruranceTypes$)))},dependencies:[I,ee,te,z,V,X,Q,W,K,N,H,Z,O,Te,ye,A],styles:[".top-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 0}[matlistitemicon][_ngcontent-%COMP%]{width:auto}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}"]});let n=i;return n})();export{rt as InsuranceTypesComponent};
