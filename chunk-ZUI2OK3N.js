import{n as ze,o as Hi}from"./chunk-3NWHJC5P.js";import{a as Ht}from"./chunk-W6QQV2A3.js";import{d as Le,e as Di,f as $e,g as Ti,h as ki,i as Ai,j as Pi,k as Fi,l as ji,m as Oi,n as Ri}from"./chunk-SUADYUT2.js";import{q as Ni}from"./chunk-YJ5DE537.js";import"./chunk-MM4TQYZZ.js";import{a as ci,b as li,c as mi,e as di,f as He,g as pi,h as hi,i as Be,j as ui,k as fi,l as gi,m as _i,n as xi,o as vi,p as Ci,q as bi,r as yi,s as wi,t as Ei,u as Mi}from"./chunk-2AC7F2HJ.js";import{a as ni}from"./chunk-DE727M4T.js";import{c as Te,d as ke,e as Ve,f as Ae,g as Pe,i as re}from"./chunk-YAVUS4SE.js";import{a as Vi}from"./chunk-SL2S6R6I.js";import{c as ai}from"./chunk-NFT5YCZS.js";import{b as Ne,c as Re}from"./chunk-2DC7NVQR.js";import{a as Ii,b as Si}from"./chunk-2TEN6ZUP.js";import{n as Rt,o as Ie,p as Se}from"./chunk-Z65746U3.js";import{a as W,b as ae,d as Ut,f as he,h as Wt,i as qt,k as Yt,l as Kt,n as Gt,o as Xt,p as Zt,r as Jt,s as je,t as ri,u as oi,x as Oe,y as si}from"./chunk-IIFEEIO4.js";import{$ as De,Ba as ti,Ca as ii,F as Lt,P as $t,W as zt,a as Nt,da as Qt,ua as Fe,wa as q,xa as H,y as Bt,ya as ct,z as Me,za as ei}from"./chunk-MLNSEME7.js";import{A as pe,C as st,d as jt,l as ne,n as Ee,o as Ot,v as rt,w as ot,z as de}from"./chunk-JOIIREXN.js";import{$b as v,Aa as ee,Ab as Q,Ba as $,Eb as h,Ec as me,Fb as be,G as ge,Gb as x,H as K,Hb as it,Hc as Z,Ib as U,Ic as Ft,J as Ke,Ja as ve,Ka as C,L as It,La as b,Lb as w,Ma as Ze,Mb as At,N as G,Nb as ye,Oa as Mt,Ob as we,Pa as Dt,Pb as s,Qa as Ce,Qb as r,Rb as _,S as St,Sb as M,Ta as Je,Tb as D,U as Ge,Ua as P,Va as Tt,Vb as S,_a as et,a as bt,b as yt,bc as u,cc as nt,da as Xe,dc as X,e as pn,ec as at,f as hn,fa as _e,fc as z,g as fe,gc as F,hc as j,i as wt,ic as te,jc as c,kc as k,l as Y,lc as I,m as se,ma as xe,mb as l,mc as le,na as J,nb as g,pa as R,pb as kt,q as Et,qc as ie,rc as A,sa as T,sc as Pt,tc as O,u as Ye,uc as N,wb as Vt,y as ce,ya as L,za as V,zb as tt}from"./chunk-WRJUXR2E.js";var Li=pn((lt,mt)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof lt<"u"?t():(t(),e.FileSaver={})})(lt,function(){"use strict";function e(m,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function t(m,p,E){var f=new XMLHttpRequest;f.open("GET",m),f.responseType="blob",f.onload=function(){d(f.response,p,E)},f.onerror=function(){console.error("could not download file")},f.send()}function o(m){var p=new XMLHttpRequest;p.open("HEAD",m,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function i(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(p)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(m,p,E){var f=n.URL||n.webkitURL,y=document.createElement("a");p=p||m.name||"download",y.download=p,y.rel="noopener",typeof m=="string"?(y.href=m,y.origin===location.origin?i(y):o(y.href)?t(m,p,E):i(y,y.target="_blank")):(y.href=f.createObjectURL(m),setTimeout(function(){f.revokeObjectURL(y.href)},4e4),setTimeout(function(){i(y)},0))}:"msSaveOrOpenBlob"in navigator?function(m,p,E){if(p=p||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(e(m,E),p);else if(o(m))t(m,p,E);else{var f=document.createElement("a");f.href=m,f.target="_blank",setTimeout(function(){i(f)})}}:function(m,p,E,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof m=="string")return t(m,p,E);var y=m.type==="application/octet-stream",dn=/constructor/i.test(n.HTMLElement)||n.safari,vt=/CriOS\/[\d]+/.test(navigator.userAgent);if((vt||y&&dn||a)&&typeof FileReader<"u"){var We=new FileReader;We.onloadend=function(){var oe=We.result;oe=vt?oe:oe.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=oe:location=oe,f=null},We.readAsDataURL(m)}else{var Ct=n.URL||n.webkitURL,qe=Ct.createObjectURL(m);f?f.location=qe:location.href=qe,f=null,setTimeout(function(){Ct.revokeObjectURL(qe)},4e4)}});n.saveAs=d.saveAs=d,typeof mt<"u"&&(mt.exports=d)})});var ue=function(e){return e.VEHICLE="Vehicle",e.POLICY="Policy",e}(ue||{}),Bi=(()=>{let t=class t{constructor(){this.http=T(Nt),this.url=Ht.API_URL}getAttachments(i,n){return this.http.get(`${this.url}/${i}/${n}/attachments`).pipe(ce(a=>a.map(d=>yt(bt({},d),{createdTime:new Date(d.createdTime)}))))}deleteAttachment(i){return this.http.delete(`${this.url}/Attachment/${i}`)}downloadAttachment(i){return this.http.get(`${this.url}/Attachment/${i}`,{responseType:"blob"})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xe({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var zi=hn(Li());var $i=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ee({type:t}),t.\u0275inj=J({imports:[Ot,De]});let e=t;return e})();var fn=(e,t)=>t.id;function gn(e,t){if(e&1){let o=S();s(0,"mat-list-item")(1,"div",0)(2,"button",1),v("click",function(){let n=C(o).$implicit,a=u();return b(a.onDelete(n.id))}),s(3,"mat-icon"),c(4,"delete"),r()(),s(5,"button",2),v("click",function(){let n=C(o).$implicit,a=u();return b(a.onDownload(n.id,n.fileName))}),s(6,"mat-icon"),c(7,"download"),r()()(),s(8,"span",3),c(9),r(),s(10,"span",4),c(11),O(12,"date"),r()()}if(e&2){let o=t.$implicit;l(9),I(" ",o.fileName,""),l(2),k(N(12,2,o.createdTime))}}var Ue=(()=>{let t=class t{constructor(){this.attachmentService=T(Bi),this.attachments$=new wt,this.error$=new se(!1),this.isLoading$=new se(!1)}ngOnInit(){this.isLoading$.next(!0),this.attachments$=this.attachmentService.getAttachments(this.parent,this.parentId).pipe(Ke(i=>(this.error$.next(!0),Ye(()=>i))),Ge(()=>this.isLoading$.next(!1)))}onDelete(i){this.attachmentService.deleteAttachment(i).pipe(G(1)).subscribe(()=>{this.attachments$=this.attachmentService.getAttachments(this.parent,this.parentId).pipe(Ke(n=>(this.error$.next(!0),Ye(()=>n))),Ge(()=>this.isLoading$.next(!1)))})}onDownload(i,n){this.attachmentService.downloadAttachment(i).pipe(G(1)).subscribe(a=>(0,zi.saveAs)(a,n))}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=V({type:t,selectors:[["app-attachments-list"]],inputs:{parent:"parent",parentId:"parentId"},standalone:!0,features:[A],decls:4,vars:2,consts:[["matListItemIcon",""],["mat-icon-button","","type","button","color","warn","matTooltip","Usu\u0144",3,"click"],["mat-icon-button","","type","button","matTooltip","Pobierz",3,"click"],["matListItemTitle",""],["matListItemLine",""]],template:function(n,a){n&1&&(s(0,"mat-list"),ye(1,gn,13,4,"mat-list-item",null,fn),O(3,"async"),r()),n&2&&(l(),we(N(3,0,a.attachments$)))},dependencies:[re,Ae,Pe,Ve,ke,Te,W,H,q,$i,ne,Ee],styles:["[matlistitemicon][_ngcontent-%COMP%]{width:auto}"]});let e=t;return e})();function _n(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("VIN: ",o.vehicle.vin,"")}}function xn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("Data produkcji: ",o.vehicle.productionYear,"")}}function vn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("Data pierwszej rejestracji: ",o.vehicle.firstRegistrationDate,"")}}function Cn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("Pojemno\u015B\u0107 silnika: ",o.vehicle.capacity,"")}}function bn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("KM: ",o.vehicle.km,"")}}function yn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("KW: ",o.vehicle.kw,"")}}function wn(e,t){if(e&1&&(s(0,"h3"),c(1),r()),e&2){let o=u(2);l(),I("Przebieg: ",o.vehicle.mileage,"")}}function En(e,t){if(e&1&&(s(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title",0),c(3),s(4,"button",1)(5,"mat-icon"),c(6,"edit"),r()()()(),s(7,"mat-card-content",2)(8,"div",3)(9,"h3"),c(10),r(),s(11,"h3"),c(12),r(),s(13,"h3"),c(14),r(),h(15,_n,2,1,"h3")(16,xn,2,1,"h3")(17,vn,2,1,"h3")(18,Cn,2,1,"h3")(19,bn,2,1,"h3")(20,yn,2,1,"h3")(21,wn,2,1,"h3"),_(22,"app-attachments-list",4),r()()()),e&2){let o=u();l(3),le(" ",o.vehicle.name," ",o.vehicle.registrationNumber," "),l(7),I("Marka: ",o.vehicle.vehicleBrand.name,""),l(2),I("Numer rejestracyjny: ",o.vehicle.registrationNumber,""),l(2),le("W\u0142a\u015Bciciel: ",o.vehicle.insurer.lastName," ",o.vehicle.insurer.firstName,""),l(),w(15,o.vehicle.vin?15:-1),l(),w(16,o.vehicle.productionYear?16:-1),l(),w(17,o.vehicle.firstRegistrationDate?17:-1),l(),w(18,o.vehicle.capacity?18:-1),l(),w(19,o.vehicle.km?19:-1),l(),w(20,o.vehicle.kw?20:-1),l(),w(21,o.vehicle.mileage?21:-1),l(),x("parent",o.AttachmentParentEnum.VEHICLE)("parentId",o.vehicle.id)}}function In(e,t){e&1&&_(0,"app-error-info")}var dt=new R("VEHICLE_CONTAINER_DATA"),Ui=(()=>{let t=class t{constructor(i){this.vehicle=i,this.AttachmentParentEnum=ue}};t.\u0275fac=function(n){return new(n||t)(g(dt))},t.\u0275cmp=V({type:t,selectors:[["app-vehicles-details"]],standalone:!0,features:[A],decls:2,vars:1,consts:[[1,"title"],["mat-icon-button","","matTooltip","Edytuj"],[1,"content"],[1,"content-inner"],[3,"parent","parentId"]],template:function(n,a){n&1&&h(0,En,23,15,"mat-card")(1,In,1,0),n&2&&w(0,a.vehicle?0:1)},dependencies:[He,ci,mi,di,li,re,ae,W,H,q,Mi,Ue],styles:[".title[_ngcontent-%COMP%]{padding-bottom:15px;display:flex;align-items:center}"]});let e=t;return e})();var pt=e=>e.vehicleBrands,Wi=Se(pt,e=>e.isLoading),qi=Se(pt,e=>e.error),Yi=Se(pt,e=>e.vehicleBrands);var Ki=(()=>{let t=class t{constructor(){this.store=T(Rt),this.isLoading$=this.store.pipe(Ie(Wi)),this.error$=this.store.pipe(Ie(qi)),this.vehicles$=this.store.pipe(Ie(Yi))}getVehicleBrands(){this.store.dispatch(Hi())}};t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=xe({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Gi=(()=>{let t=class t{constructor(){this.fileDropped=new P}onDragOver(i){i.preventDefault(),i.stopPropagation(),this.fileOver=!0}onDragLeave(i){i.preventDefault(),i.stopPropagation(),this.fileOver=!1}ondrop(i){if(i.preventDefault(),i.stopPropagation(),this.fileOver=!1,i&&i.dataTransfer){let n=i.dataTransfer.files;n.length>0&&this.fileDropped.emit(n)}}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=$({type:t,selectors:[["","appDnd",""]],hostVars:2,hostBindings:function(n,a){n&1&&v("dragover",function(m){return a.onDragOver(m)})("dragleave",function(m){return a.onDragLeave(m)})("drop",function(m){return a.ondrop(m)}),n&2&&U("fileover",a.fileOver)},outputs:{fileDropped:"fileDropped"},standalone:!0});let e=t;return e})();var Mn=["attachmentDropRef"];function Dn(e,t){if(e&1){let o=S();s(0,"mat-list-item")(1,"div",4)(2,"button",5),v("click",function(){let n=C(o).$index,a=u();return b(a.handleDelete(n))}),s(3,"mat-icon"),c(4,"delete"),r()()(),s(5,"span",6),c(6),r(),s(7,"span",7),c(8),O(9,"date"),r()()}if(e&2){let o=t.$implicit;l(6),I(" ",o.name,""),l(2),k(N(9,2,o.lastModified))}}var Xi=(()=>{let t=class t{constructor(){this.attachments=[],this.onAttachmentsChange=new P}onAttachmentDropped(i){this.prepareAttachmentsList(i)}attachmentBrowseHandler(i){let n=i.target;n.files?.length&&this.prepareAttachmentsList(n.files)}handleDelete(i){this.attachments.splice(i,1),this.onAttachmentsChange.emit(this.attachments)}prepareAttachmentsList(i){this.attachments=[...this.attachments,...Array.from(i)],this.attachmentDropEl.nativeElement.value="",this.onAttachmentsChange.emit(this.attachments)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=V({type:t,selectors:[["app-attachment-input"]],viewQuery:function(n,a){if(n&1&&z(Mn,5),n&2){let d;F(d=j())&&(a.attachmentDropEl=d.first)}},outputs:{onAttachmentsChange:"onAttachmentsChange"},standalone:!0,features:[A],decls:14,vars:0,consts:[["attachmentDropRef",""],["appDnd","",1,"container",3,"fileDropped"],["type","file","id","attachmentDropRef","multiple","",3,"change"],["for","attachmentDropRef"],["matListItemIcon",""],["mat-icon-button","","color","warn","matTooltip","Usu\u0144",3,"click"],["matListItemTitle",""],["matListItemLine",""]],template:function(n,a){if(n&1){let d=S();s(0,"div",1),v("fileDropped",function(p){return C(d),b(a.onAttachmentDropped(p))}),s(1,"input",2,0),v("change",function(p){return C(d),b(a.attachmentBrowseHandler(p))}),r(),s(3,"mat-icon"),c(4,"upload"),r(),s(5,"h3"),c(6,"Przeci\u0105gnij i upu\u015B\u0107 tutaj"),r(),s(7,"h3"),c(8,"lub"),r(),s(9,"label",3),c(10,"Wybierz plik"),r()(),s(11,"mat-list"),ye(12,Dn,10,4,"mat-list-item",null,At),r()}n&2&&(l(12),we(a.attachments))},dependencies:[ae,W,H,q,re,Ae,Pe,Ve,ke,Te,Ee,Gi],styles:[".container[_ngcontent-%COMP%]{width:450px;height:200px;padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto;transition:.1s}.container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0;cursor:pointer}.container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#fff;width:183px;height:44px;border-radius:4px;background-color:var(--primary);padding:8px 16px}.container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px;font-weight:500}.fileover[_ngcontent-%COMP%]{border:solid 1px #979797;background-color:#673ab71a}"]});let e=t;return e})();var kn=0,ht=new R("CdkAccordion"),Zi=(()=>{let t=class t{constructor(){this._stateChanges=new Y,this._openCloseAllActions=new Y,this.id=`cdk-accordion-${kn++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(i){this._stateChanges.next(i)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=$({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[L.HasDecoratorInputTransform,"multi","multi",Z]},exportAs:["cdkAccordion"],standalone:!0,features:[ie([{provide:ht,useExisting:t}]),Q,ve]});let e=t;return e})(),Vn=0,Ji=(()=>{let t=class t{get expanded(){return this._expanded}set expanded(i){if(this._expanded!==i){if(this._expanded=i,this.expandedChange.emit(i),i){this.opened.emit();let n=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,n)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(i,n,a){this.accordion=i,this._changeDetectorRef=n,this._expansionDispatcher=a,this._openCloseAllSubscription=fe.EMPTY,this.closed=new P,this.opened=new P,this.destroyed=new P,this.expandedChange=new P,this.id=`cdk-accordion-child-${Vn++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((d,m)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===m&&this.id!==d&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(i=>{this.disabled||(this.expanded=i)})}};t.\u0275fac=function(n){return new(n||t)(g(ht,12),g(me),g(Me))},t.\u0275dir=$({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[L.HasDecoratorInputTransform,"expanded","expanded",Z],disabled:[L.HasDecoratorInputTransform,"disabled","disabled",Z]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[ie([{provide:ht,useValue:void 0}]),Q]});let e=t;return e})(),en=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ee({type:t}),t.\u0275inj=J({});let e=t;return e})();var Fn=["body"],jn=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],On=["mat-expansion-panel-header","*","mat-action-row"];function Nn(e,t){}var Rn=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Hn=["mat-panel-title","mat-panel-description","*"];function Bn(e,t){if(e&1&&(s(0,"span",1),Ze(),s(1,"svg",2),_(2,"path",3),r()()),e&2){let o=u();x("@indicatorRotate",o._getExpandedState())}}var ut=new R("MAT_ACCORDION"),tn="225ms cubic-bezier(0.4,0.0,0.2,1)",an={indicatorRotate:rt("indicatorRotate",[pe("collapsed, void",de({transform:"rotate(0deg)"})),pe("expanded",de({transform:"rotate(180deg)"})),st("expanded <=> collapsed, void => collapsed",ot(tn))]),bodyExpansion:rt("bodyExpansion",[pe("collapsed, void",de({height:"0px",visibility:"hidden"})),pe("expanded",de({height:"*",visibility:""})),st("expanded <=> collapsed, void => collapsed",ot(tn))])},rn=new R("MAT_EXPANSION_PANEL"),ft=(()=>{let t=class t{constructor(i,n){this._template=i,this._expansionPanel=n}};t.\u0275fac=function(n){return new(n||t)(g(kt),g(rn,8))},t.\u0275dir=$({type:t,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0});let e=t;return e})(),Ln=0,on=new R("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),gt=(()=>{let t=class t extends Ji{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(i){this._hideToggle=i}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(i){this._togglePosition=i}constructor(i,n,a,d,m,p,E){super(i,n,a),this._viewContainerRef=d,this._animationMode=p,this._hideToggle=!1,this.afterExpand=new P,this.afterCollapse=new P,this._inputChanges=new Y,this._headerId=`mat-expansion-panel-header-${Ln++}`,this.accordion=i,this._document=m,this._animationsDisabled=p==="NoopAnimations",E&&(this.hideToggle=E.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Xe(null),K(()=>this.expanded&&!this._portal),G(1)).subscribe(()=>{this._portal=new ei(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(i){this._inputChanges.next(i)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let i=this._document.activeElement,n=this._body.nativeElement;return i===n||n.contains(i)}return!1}_animationStarted(i){!nn(i)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(i){nn(i)||(i.toState==="expanded"?this.afterExpand.emit():i.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}};t.\u0275fac=function(n){return new(n||t)(g(ut,12),g(me),g(Me),g(Vt),g(jt),g(et,8),g(on,8))},t.\u0275cmp=V({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(n,a,d){if(n&1&&at(d,ft,5),n&2){let m;F(m=j())&&(a._lazyContent=m.first)}},viewQuery:function(n,a){if(n&1&&z(Fn,5),n&2){let d;F(d=j())&&(a._body=d.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(n,a){n&2&&U("mat-expanded",a.expanded)("_mat-animation-noopable",a._animationsDisabled)("mat-expansion-panel-spacing",a._hasSpacing())},inputs:{hideToggle:[L.HasDecoratorInputTransform,"hideToggle","hideToggle",Z],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[ie([{provide:ut,useValue:void 0},{provide:rn,useExisting:t}]),Q,tt,ve,A],ngContentSelectors:On,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(n,a){if(n&1){let d=S();nt(jn),X(0),s(1,"div",1,0),v("@bodyExpansion.start",function(p){return C(d),b(a._animationStarted(p))})("@bodyExpansion.done",function(p){return C(d),b(a._animationDone(p))}),s(3,"div",2),X(4,1),h(5,Nn,0,0,"ng-template",3),r(),X(6,2),r()}n&2&&(l(),x("@bodyExpansion",a._getExpandedState())("id",a.id),be("aria-labelledby",a._headerId),l(4),x("cdkPortalOutlet",a._portal))},dependencies:[ti],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[an.bodyExpansion]},changeDetection:0});let e=t;return e})();function nn(e){return e.fromState==="void"}var _t=(()=>{let t=class t{constructor(i,n,a,d,m,p,E){this.panel=i,this._element=n,this._focusMonitor=a,this._changeDetectorRef=d,this._animationMode=p,this._parentChangeSubscription=fe.EMPTY,this.tabIndex=0;let f=i.accordion?i.accordion._stateChanges.pipe(K(y=>!!(y.hideToggle||y.togglePosition))):Et;this.tabIndex=parseInt(E||"")||0,this._parentChangeSubscription=ge(i.opened,i.closed,f,i._inputChanges.pipe(K(y=>!!(y.hideToggle||y.disabled||y.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),i.closed.pipe(K(()=>i._containsFocus())).subscribe(()=>a.focusVia(n,"program")),m&&(this.expandedHeight=m.expandedHeight,this.collapsedHeight=m.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let i=this._isExpanded();return i&&this.expandedHeight?this.expandedHeight:!i&&this.collapsedHeight?this.collapsedHeight:null}_keydown(i){switch(i.keyCode){case 32:case 13:Lt(i)||(i.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(i);return}}focus(i,n){i?this._focusMonitor.focusVia(this._element,i,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(i=>{i&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}};t.\u0275fac=function(n){return new(n||t)(g(gt,1),g(Je),g(zt),g(me),g(on,8),g(et,8),Dt("tabindex"))},t.\u0275cmp=V({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(n,a){n&1&&v("click",function(){return a._toggle()})("keydown",function(m){return a._keydown(m)}),n&2&&(be("id",a.panel._headerId)("tabindex",a.disabled?-1:a.tabIndex)("aria-controls",a._getPanelId())("aria-expanded",a._isExpanded())("aria-disabled",a.panel.disabled),it("height",a._getHeaderHeight()),U("mat-expanded",a._isExpanded())("mat-expansion-toggle-indicator-after",a._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",a._getTogglePosition()==="before")("_mat-animation-noopable",a._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[L.HasDecoratorInputTransform,"tabIndex","tabIndex",i=>i==null?0:Ft(i)]},standalone:!0,features:[Q,A],ngContentSelectors:Hn,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(n,a){n&1&&(nt(Rn),s(0,"span",0),X(1),X(2,1),X(3,2),r(),h(4,Bn,3,1,"span",1)),n&2&&(U("mat-content-hide-toggle",!a._showToggle()),l(4),w(4,a._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[an.indicatorRotate]},changeDetection:0});let e=t;return e})();var sn=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=$({type:t,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0});let e=t;return e})(),cn=(()=>{let t=class t extends Zi{constructor(){super(...arguments),this._ownHeaders=new Tt,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(Xe(this._headers)).subscribe(i=>{this._ownHeaders.reset(i.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new $t(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(i){this._keyManager.onKeydown(i)}_handleHeaderFocus(i){this._keyManager.updateActiveItem(i)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}};t.\u0275fac=(()=>{let i;return function(a){return(i||(i=Mt(t)))(a||t)}})(),t.\u0275dir=$({type:t,selectors:[["mat-accordion"]],contentQueries:function(n,a,d){if(n&1&&at(d,_t,5),n&2){let m;F(m=j())&&(a._headers=m)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(n,a){n&2&&U("mat-accordion-multi",a.multi)},inputs:{hideToggle:[L.HasDecoratorInputTransform,"hideToggle","hideToggle",Z],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[ie([{provide:ut,useExisting:t}]),Q,tt]});let e=t;return e})(),ln=(()=>{let t=class t{};t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=ee({type:t}),t.\u0275inj=J({imports:[De,en,ii]});let e=t;return e})();function Un(e,t){e&1&&(s(0,"mat-error"),c(1," Nazwa pojazdu jest wymagane "),r())}function Wn(e,t){e&1&&(s(0,"mat-error"),c(1," Numer rejestracyjny jest wymagany "),r())}function qn(e,t){if(e&1&&_(0,"app-autocomplete",21),e&2){let o=u(),i=u();x("control",i.form.controls.vehicleBrandId)("options",o)}}function Yn(e,t){e&1&&h(0,qn,1,2,"app-autocomplete",21),e&2&&w(0,t.length?0:-1)}function Kn(e,t){if(e&1&&_(0,"app-autocomplete",22),e&2){let o=u(),i=u();x("control",i.form.controls.insurerId)("options",o)}}function Gn(e,t){e&1&&h(0,Kn,1,2,"app-autocomplete",22),e&2&&w(0,t.length?0:-1)}function Xn(e,t){if(e&1&&(s(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),c(3," Pliki "),r()(),_(4,"app-attachments-list",23),r()),e&2){let o=u();l(4),x("parent",o.attachmentParentEnum.VEHICLE)("parentId",o.vehicle.id)}}function Zn(e,t){if(e&1){let o=S();s(0,"app-attachment-input",24),v("onAttachmentsChange",function(n){C(o);let a=u();return b(a.onAttachmentsChange(n))}),r()}}var xt=new R("VEHICLES_CONTAINER_FORM"),mn=(()=>{let t=class t{constructor(i,n){this.fb=i,this.vehicle=n,this.vehiclesFacade=T(ze),this.insurersFacade=T(Ni),this.vehicleBrandsFacade=T(Ki),this.attachmentParentEnum=ue,this.attachmentsToUpload=[],this.error$=this.vehiclesFacade.error$,this.form=this.fb.group({name:["",he.required],registrationNumber:["",he.required],firstRegistrationDate:this.fb.control(null),productionYear:this.fb.control(null),vin:[""],kw:this.fb.control(null),km:this.fb.control(null),capacity:this.fb.control(null),mileage:this.fb.control(null),insurerId:["",he.required],vehicleBrandId:["",he.required]}),this.insurers$=this.insurersFacade.insurers$.pipe(ce(a=>a.map(d=>({id:d.id,value:`${d.lastName} ${d.firstName}`})))),this.vehicleBrands$=this.vehicleBrandsFacade.vehicles$.pipe(ce(a=>a.map(d=>({id:d.id,value:d.name}))))}ngOnInit(){this.insurersFacade.getAllInsurers(),this.vehicleBrandsFacade.getVehicleBrands(),this.vehicle&&this.form.setValue({name:this.vehicle.name,registrationNumber:this.vehicle.registrationNumber,firstRegistrationDate:this.vehicle.firstRegistrationDate,productionYear:this.vehicle.productionYear,vin:this.vehicle.vin,kw:this.vehicle.kw,km:this.vehicle.km,capacity:this.vehicle.capacity,mileage:this.vehicle.mileage,insurerId:this.vehicle.insurer.id,vehicleBrandId:this.vehicle.vehicleBrand.id})}onAttachmentsChange(i){this.attachmentsToUpload=i}onSubmit(){if(this.form.invalid)return;let i=Ri(this.form.value);i.attachments=this.attachmentsToUpload,this.vehicle?this.vehiclesFacade.editVehicle(i,this.vehicle.id):this.vehiclesFacade.createVehicle(i)}};t.\u0275fac=function(n){return new(n||t)(g(Zt),g(xt))},t.\u0275cmp=V({type:t,selectors:[["app-vehicles-form"]],standalone:!0,features:[A],decls:79,vars:15,consts:[["firstRegistrationDate",""],["productionYear",""],["novalidate","",3,"ngSubmit","formGroup"],["multi",""],["expanded",""],[1,"row"],[1,"col"],[1,"full-width"],["matInput","","formControlName","name"],["matInput","","formControlName","registrationNumber"],["matInput","","formControlName","firstRegistrationDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","formControlName","productionYear",3,"matDatepicker"],["matInput","","formControlName","vin"],["matInput","","formControlName","mileage"],["matInput","","formControlName","kw"],["matInput","","type","number","formControlName","km"],["matInput","","formControlName","capacity"],["matExpansionPanelContent",""],[1,"button-container"],["mat-raised-button","","color","primary","type","submit"],["label","Marka","errorMessage","Marka pojazdu jest wymagana",3,"control","options"],["label","W\u0142a\u015Bciciel","errorMessage","W\u0142a\u015Bciciel jest wymagany",3,"control","options"],[3,"parent","parentId"],[3,"onAttachmentsChange"]],template:function(n,a){if(n&1){let d=S();s(0,"form",2),v("ngSubmit",function(){return C(d),b(a.onSubmit())}),s(1,"mat-accordion",3)(2,"mat-expansion-panel",4)(3,"mat-expansion-panel-header")(4,"mat-panel-title"),c(5),r()(),s(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),c(10,"Nazwa pojazdu"),r(),_(11,"input",8),h(12,Un,2,0,"mat-error"),r()(),s(13,"div",6)(14,"mat-form-field",7)(15,"mat-label"),c(16,"Numer rejestracyjny"),r(),_(17,"input",9),h(18,Wn,2,0,"mat-error"),r()()(),s(19,"div",5)(20,"div",6),h(21,Yn,1,1),O(22,"async"),r(),s(23,"div",6),h(24,Gn,1,1),O(25,"async"),r()(),s(26,"div",5)(27,"div",6)(28,"mat-form-field",7)(29,"mat-label"),c(30,"Data pierwszej rejestracji"),r(),_(31,"input",10)(32,"mat-datepicker-toggle",11)(33,"mat-datepicker",null,0),r()(),s(35,"div",6)(36,"mat-form-field",7)(37,"mat-label"),c(38,"Data produkcji"),r(),_(39,"input",12)(40,"mat-datepicker-toggle",11)(41,"mat-datepicker",null,1),r()()(),s(43,"div",5)(44,"div",6)(45,"mat-form-field",7)(46,"mat-label"),c(47,"VIN"),r(),_(48,"input",13),r()(),s(49,"div",6)(50,"mat-form-field",7)(51,"mat-label"),c(52,"Przebieg"),r(),_(53,"input",14),r()()(),s(54,"div",5)(55,"div",6)(56,"mat-form-field",7)(57,"mat-label"),c(58,"KW"),r(),_(59,"input",15),r()(),s(60,"div",6)(61,"mat-form-field",7)(62,"mat-label"),c(63,"KM"),r(),_(64,"input",16),r()(),s(65,"div",6)(66,"mat-form-field",7)(67,"mat-label"),c(68,"Pojemno\u015B\u0107"),r(),_(69,"input",17),r()()()(),h(70,Xn,5,2,"mat-expansion-panel"),s(71,"mat-expansion-panel")(72,"mat-expansion-panel-header")(73,"mat-panel-title"),c(74," Do\u0142\u0105cz pliki "),r()(),h(75,Zn,1,0,"ng-template",18),r()(),s(76,"div",19)(77,"button",20),c(78,"Zapisz"),r()()()}if(n&2){let d,m,p=te(34),E=te(42);x("formGroup",a.form),l(5),I(" ",a.vehicle?"Edytuj pojazd":"Dodaj nowy pojazd"," "),l(7),w(12,a.form.controls.name.hasError("required")?12:-1),l(6),w(18,a.form.controls.registrationNumber.hasError("required")?18:-1),l(3),w(21,(d=N(22,11,a.vehicleBrands$))?21:-1,d),l(3),w(24,(m=N(25,13,a.insurers$))?24:-1,m),l(7),x("matDatepicker",p),l(),x("for",p),l(7),x("matDatepicker",E),l(),x("for",E),l(30),w(70,a.vehicle?70:-1)}},dependencies:[He,Re,Ne,Oe,je,ri,oi,Jt,Yt,Ut,Kt,Wt,qt,Gt,Xt,H,Fe,ne,Oi,Qt,ji,Ai,Pi,Fi,Ue,Xi,ln,cn,gt,_t,sn,ft],styles:[".full-width[_ngcontent-%COMP%]{width:100%}@media (min-width: 800px){.row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.col[_ngcontent-%COMP%]{flex:1;margin-right:20px}.col[_ngcontent-%COMP%]:last-child{margin-right:0}}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-size:18px}.button-container[_ngcontent-%COMP%]{margin-top:15px}"]});let e=t;return e})();var Jn=()=>[5,10,15,30];function ea(e,t){if(e&1){let o=S();s(0,"th",33)(1,"mat-checkbox",34),v("change",function(n){C(o);let a=u();return b(n?a.toggleAllRows():null)}),r()()}if(e&2){let o=u();l(),x("checked",o.selection.hasValue()&&o.isAllSelected())("indeterminate",o.selection.hasValue()&&!o.isAllSelected())}}function ta(e,t){if(e&1){let o=S();s(0,"td",35)(1,"mat-checkbox",36),v("click",function(n){return C(o),b(n.stopPropagation())})("change",function(n){let a=C(o).$implicit,d=u();return b(n?d.selection.toggle(a):null)}),r()()}if(e&2){let o=t.$implicit,i=u();l(),x("checked",i.selection.isSelected(o))}}function ia(e,t){e&1&&_(0,"th",37)}function na(e,t){if(e&1){let o=S();s(0,"td",38)(1,"button",39),v("click",function(){let n=C(o).$implicit,a=u();return b(a.openDetails(n))}),s(2,"mat-icon",40),c(3,"open_in_new"),r()()()}}function aa(e,t){e&1&&_(0,"th",37)}function ra(e,t){if(e&1){let o=S();s(0,"td",38)(1,"button",41),v("click",function(){let n=C(o).$implicit,a=u();return b(a.openForm(n))}),s(2,"mat-icon",40),c(3,"edit"),r()()()}}function oa(e,t){e&1&&_(0,"th",37)}function sa(e,t){if(e&1){let o=S();s(0,"td",38)(1,"button",42),v("click",function(){let n=C(o).$implicit,a=u();return b(a.onDeleteVehicle(n))}),s(2,"mat-icon",40),c(3,"delete"),r()()()}}function ca(e,t){e&1&&(s(0,"th",43),c(1,"Nazwa"),r())}function la(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.name)}}function ma(e,t){e&1&&(s(0,"th",43),c(1,"Marka pojazdu"),r())}function da(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.vehicleBrand.name)}}function pa(e,t){e&1&&(s(0,"th",43),c(1,"Numer rejestracyjny"),r())}function ha(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.registrationNumber)}}function ua(e,t){e&1&&(s(0,"th",43),c(1,"W\u0142a\u015Bciciel"),r())}function fa(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),le(" ",o.insurer.lastName," ",o.insurer.firstName," ")}}function ga(e,t){e&1&&(s(0,"th",43),c(1,"Data pierwszej rejestracji"),r())}function _a(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.firstRegistrationDate)}}function xa(e,t){e&1&&(s(0,"th",45),c(1,"Rok produkcji"),r())}function va(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.productionYear)}}function Ca(e,t){e&1&&(s(0,"th",43),c(1,"VIN"),r())}function ba(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.vin)}}function ya(e,t){e&1&&(s(0,"th",43),c(1,"KW"),r())}function wa(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.kw)}}function Ea(e,t){e&1&&(s(0,"th",43),c(1,"KM"),r())}function Ia(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.km)}}function Sa(e,t){e&1&&(s(0,"th",43),c(1,"Pojemno\u015B\u0107"),r())}function Ma(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.capacity)}}function Da(e,t){e&1&&(s(0,"th",43),c(1,"Przebieg"),r())}function Ta(e,t){if(e&1&&(s(0,"td",44),c(1),r()),e&2){let o=t.$implicit;l(),k(o.mileage)}}function ka(e,t){e&1&&_(0,"tr",46)}function Va(e,t){e&1&&_(0,"tr",47)}function Aa(e,t){if(e&1&&(s(0,"tr",48)(1,"td",49),c(2),r()()),e&2){u();let o=te(5);l(2),I('Brak wynik\xF3w dla: "',o.value,'"')}}var bs=(()=>{let t=class t{constructor(){this.portalService=T(ni),this.injector=T(Ce),this.dialog=T(ai),this.vehiclesFacade=T(ze),this.onDestroy$=new Y,this.searchQuery$=new se(""),this.selection=new Bt(!0,[]),this.visibleVehicles=[],this.vehicles$=this.vehiclesFacade.vehicles$,this.totalItemsCount$=this.vehiclesFacade.totalItemsCount$,this.displayedColumns=["select","details","edit","delete","name","vehicleBrand","registrationNumber","insurer","firstRegistrationDate","productionYear","vin","kw","km","capacity","mileage"]}ngAfterViewInit(){this.vehicles$.pipe(_e(this.onDestroy$)).subscribe(i=>this.visibleVehicles=i),this.searchQuery$.pipe(It(300),St(),_e(this.onDestroy$)).subscribe(()=>{this.paginator.pageIndex=0,this.loadVehicles()}),ge(this.sort.sortChange,this.paginator.page).pipe(_e(this.onDestroy$)).subscribe(()=>this.loadVehicles())}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}applyFilter(i){let n=i.target.value;this.searchQuery$.next(n)}openForm(i){this.portalService.setSelectedPortal(new ct(mn,null,Ce.create({parent:this.injector,providers:[{provide:xt,useValue:i}]}))),this.portalService.setIsOpen(!0)}openDetails(i){this.portalService.setSelectedPortal(new ct(Ui,null,Ce.create({parent:this.injector,providers:[{provide:dt,useValue:i}]}))),this.portalService.setIsOpen(!0)}onDeleteVehicle(i){this.dialog.open(Vi,{data:{name:i.name,withMessage:!1},width:"500px"}).afterClosed().pipe(K(a=>a),G(1)).subscribe(()=>this.vehiclesFacade.deleteVehicle(i.id))}isAllSelected(){let i=this.selection.selected.length,n=this.visibleVehicles.length;return i===n}toggleAllRows(){if(this.isAllSelected()){this.selection.clear();return}this.selection.select(...this.visibleVehicles)}loadVehicles(){let i={searchPhrase:this.searchQuery$.getValue(),pageIndex:this.paginator.pageIndex,pageSize:this.paginator.pageSize,sortBy:this.sort.active?this.sort.active.toLowerCase():"",sortDirection:this.sort.direction?this.sort.direction:"none"};this.vehiclesFacade.getPaginatedVehicles(i)}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=V({type:t,selectors:[["app-vehicles"]],viewQuery:function(n,a){if(n&1&&(z(Le,5),z($e,5),z(Be,5)),n&2){let d;F(d=j())&&(a.paginator=d.first),F(d=j())&&(a.sort=d.first),F(d=j())&&(a.table=d.first)}},standalone:!0,features:[A],decls:64,vars:12,consts:[["input",""],["paginator",""],[1,"top-container"],["matInput","",3,"keyup"],["mat-raised-button","","color","primary",3,"click"],[1,"table-responsive","mat-elevation-z8"],["mat-table","","matSort","","aria-label","Klienci",3,"dataSource"],["matColumnDef","select"],["class","check","mat-header-cell","",4,"matHeaderCellDef"],["class","check","mat-cell","",4,"matCellDef"],["matColumnDef","details"],["class","icon","mat-header-cell","",4,"matHeaderCellDef"],["class","icon","mat-cell","",4,"matCellDef"],["matColumnDef","edit"],["matColumnDef","delete"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","vehicleBrand"],["matColumnDef","registrationNumber"],["matColumnDef","insurer"],["matColumnDef","firstRegistrationDate"],["matColumnDef","productionYear"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","vin"],["matColumnDef","kw"],["matColumnDef","km"],["matColumnDef","capacity"],["matColumnDef","mileage"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Wybierz stron\u0119",3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-header-cell","",1,"check"],[3,"change","checked","indeterminate"],["mat-cell","",1,"check"],[3,"click","change","checked"],["mat-header-cell","",1,"icon"],["mat-cell","",1,"icon"],["mat-icon-button","","matTooltip","Szczeg\xF3\u0142y",3,"click"],[1,"mat-18"],["mat-icon-button","","matTooltip","Edytuj",3,"click"],["mat-icon-button","","color","warn","matTooltip","Usu\u0144",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(n,a){if(n&1){let d=S();s(0,"div",2)(1,"mat-form-field")(2,"mat-label"),c(3,"Wyszukaj"),r(),s(4,"input",3,0),v("keyup",function(p){return C(d),b(a.applyFilter(p))}),r()(),s(6,"button",4),v("click",function(){return C(d),b(a.openForm())}),s(7,"mat-icon"),c(8,"add"),r(),c(9," Dodaj "),r()(),s(10,"div",5)(11,"table",6),O(12,"async"),M(13,7),h(14,ea,2,2,"th",8)(15,ta,2,1,"td",9),D(),M(16,10),h(17,ia,1,0,"th",11)(18,na,4,0,"td",12),D(),M(19,13),h(20,aa,1,0,"th",11)(21,ra,4,0,"td",12),D(),M(22,14),h(23,oa,1,0,"th",11)(24,sa,4,0,"td",12),D(),M(25,15),h(26,ca,2,0,"th",16)(27,la,2,1,"td",17),D(),M(28,18),h(29,ma,2,0,"th",16)(30,da,2,1,"td",17),D(),M(31,19),h(32,pa,2,0,"th",16)(33,ha,2,1,"td",17),D(),M(34,20),h(35,ua,2,0,"th",16)(36,fa,2,2,"td",17),D(),M(37,21),h(38,ga,2,0,"th",16)(39,_a,2,1,"td",17),D(),M(40,22),h(41,xa,2,0,"th",23)(42,va,2,1,"td",17),D(),M(43,24),h(44,Ca,2,0,"th",16)(45,ba,2,1,"td",17),D(),M(46,25),h(47,ya,2,0,"th",16)(48,wa,2,1,"td",17),D(),M(49,26),h(50,Ea,2,0,"th",16)(51,Ia,2,1,"td",17),D(),M(52,27),h(53,Sa,2,0,"th",16)(54,Ma,2,1,"td",17),D(),M(55,28),h(56,Da,2,0,"th",16)(57,Ta,2,1,"td",17),D(),h(58,ka,1,0,"tr",29)(59,Va,1,0,"tr",30)(60,Aa,3,1,"tr",31),r()(),_(61,"mat-paginator",32,1),O(63,"async")}n&2&&(l(11),x("dataSource",N(12,7,a.vehicles$)),l(47),x("matHeaderRowDef",a.displayedColumns),l(),x("matRowDefColumns",a.displayedColumns),l(2),x("length",N(63,9,a.totalItemsCount$))("pageIndex",0)("pageSize",10)("pageSizeOptions",Pt(11,Jn)))},dependencies:[Ei,Be,fi,vi,gi,ui,Ci,_i,xi,bi,yi,wi,Di,Le,ki,$e,Ti,ae,W,H,Fe,q,si,Oe,je,Re,Ne,Si,Ii,hi,pi,ne],styles:[".top-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-right:20px}.icon[_ngcontent-%COMP%]{padding:0;width:0}.check[_ngcontent-%COMP%]{width:0}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f0f0f0!important}"]});let e=t;return e})();export{bs as VehiclesComponent};
