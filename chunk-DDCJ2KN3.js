import{a as M}from"./chunk-KPE2YWK4.js";import"./chunk-V7IF3NOS.js";import{a as A,b as $,c as Z,d as H,e as K,f as Q,g as W,i as X}from"./chunk-YAVUS4SE.js";import{a as yt}from"./chunk-SL2S6R6I.js";import{a as it,b as ot,c as nt,d as at,e as mt,f as rt,g as lt,h as st}from"./chunk-NFT5YCZS.js";import{b as ut,c as ft}from"./chunk-2DC7NVQR.js";import{a as Ct,b as ht}from"./chunk-2TEN6ZUP.js";import"./chunk-Z65746U3.js";import{a as j,b as V,d as B,f as y,h as O,i as P,k as G,n as R,o as U,p as q,r as J,s as pt,x as ct,y as dt}from"./chunk-IIFEEIO4.js";import{ua as Y,va as tt,wa as et,xa as g}from"./chunk-MLNSEME7.js";import{l as z}from"./chunk-JOIIREXN.js";import{$b as C,Eb as b,Gb as v,H as d,Ka as _,La as I,Lb as x,N as u,Nb as E,Ob as S,Pb as n,Qb as a,Rb as c,Vb as N,bc as F,jc as m,kc as T,mb as l,nb as D,rc as h,sa as p,tc as L,uc as k,y as w,za as f}from"./chunk-WRJUXR2E.js";function It(o,i){o&1&&m(0," Edytuj Towarzystwo Ubezpieczeniowe ")}function Dt(o,i){o&1&&m(0," Dodaj Towarzystwo Ubezpieczeniowe ")}function bt(o,i){o&1&&m(0," Zapisz ")}function vt(o,i){o&1&&m(0," Dodaj ")}var gt=(()=>{let i=class i{constructor(e,t){this.dialogRef=e,this.data=t,this.companiesFacade=p(M),this.fb=p(q),this.isEditing=!1,this.companyId=null,this.form=this.fb.nonNullable.group({name:["",[y.minLength(3),y.maxLength(100),y.required]],shortName:[""]}),this.initialCompany=null,this.initialCompany=t.company,this.form.controls.name.setValue(t.company?t.company.name:""),this.form.controls.shortName.setValue(t.company?t.company.shortName:""),this.isEditing=!!t.company,this.companyId=t.company?t.company.id:null}ngOnInit(){this.dialogRef.afterClosed().pipe(d(e=>e&&e.valid),w(e=>this.mapToCreateInsuranceCompany(e)),u(1)).subscribe(e=>this.isEditing&&this.companyId?this.companiesFacade.editCompany(e,this.companyId):this.companiesFacade.createCompany(e))}isSubmitDisabled(){return this.form.invalid||!(this.initialCompany?.name!==this.form.controls.name.value||this.initialCompany?.shortName!==this.form.controls.shortName.value)}mapToCreateInsuranceCompany(e){return{name:e.controls.name.value,shortName:e.controls.shortName.value}}};i.\u0275fac=function(t){return new(t||i)(D(it),D(ot))},i.\u0275cmp=f({type:i,selectors:[["app-insurance-company-dialog"]],standalone:!0,features:[h],decls:19,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"form-field"],["matInput","","formControlName","name","cdkFocusInitial",""],["matInput","","formControlName","shortName"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"]],template:function(t,r){t&1&&(n(0,"h2",0),b(1,It,1,0)(2,Dt,1,0),a(),n(3,"mat-dialog-content")(4,"form",1)(5,"mat-form-field",2)(6,"mat-label"),m(7,"Pe\u0142na nazwa"),a(),c(8,"input",3),a(),n(9,"mat-form-field",2)(10,"mat-label"),m(11,"Skr\xF3t"),a(),c(12,"input",4),a()()(),n(13,"mat-dialog-actions")(14,"button",5),m(15,"Cancel"),a(),n(16,"button",6),b(17,bt,1,0)(18,vt,1,0),a()()),t&2&&(l(),x(1,r.isEditing?1:2),l(3),v("formGroup",r.form),l(12),v("mat-dialog-close",r.form)("disabled",r.isSubmitDisabled()),l(),x(17,r.isEditing?17:18))},dependencies:[st,at,mt,lt,rt,dt,ct,pt,ft,ut,g,Y,J,G,B,O,P,R,U],styles:[".form-field[_ngcontent-%COMP%]{width:100%}"]});let o=i;return o})();var xt=(o,i)=>i.id;function Ft(o,i){if(o&1){let s=N();n(0,"mat-list-item")(1,"div",2)(2,"button",3),C("click",function(){let t=_(s).$implicit,r=F();return I(r.deleteCompany(t))}),n(3,"mat-icon"),m(4,"delete"),a()(),n(5,"button",4),C("click",function(){let t=_(s).$implicit,r=F();return I(r.openDialog(t))}),n(6,"mat-icon"),m(7,"edit"),a()()(),n(8,"span",5),m(9),a(),n(10,"span",6),m(11),a()(),c(12,"mat-divider")}if(o&2){let s=i.$implicit;l(9),T(s.shortName?s.shortName:s.name),l(2),T(s.shortName?s.name:"")}}var me=(()=>{let i=class i{constructor(){this.companiesFacade=p(M),this.dialog=p(nt),this.companies$=this.companiesFacade.companies$}ngOnInit(){this.companiesFacade.getCompanies()}openDialog(e){this.dialog.open(gt,{data:{company:e}})}deleteCompany(e){this.dialog.open(yt,{data:{name:e.name},width:"500px"}).afterClosed().pipe(d(r=>r),u(1)).subscribe(()=>this.companiesFacade.deleteCompany(e.id))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=f({type:i,selectors:[["app-insurance-company"]],standalone:!0,features:[h],decls:11,vars:2,consts:[[1,"top-container"],["mat-raised-button","","color","primary",3,"click"],["matListItemIcon",""],["mat-icon-button","","color","warn","matTooltip","Usu\u0144",3,"click"],["mat-icon-button","","matTooltip","Edytuj",3,"click"],["matListItemTitle",""],["matListItemLine",""]],template:function(t,r){t&1&&(n(0,"div",0)(1,"h1"),m(2,"Towarzystwa ubezpieczeniowe"),a(),n(3,"a",1),C("click",function(){return r.openDialog()}),n(4,"mat-icon"),m(5,"add"),a(),m(6," Dodaj "),a()(),n(7,"mat-list"),E(8,Ft,13,2,null,null,xt),L(10,"async"),a()),t&2&&(l(8),S(k(10,0,r.companies$)))},dependencies:[g,tt,et,V,j,X,Q,W,K,A,H,Z,$,ht,Ct,z],styles:[".top-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 20px 0}[matlistitemicon][_ngcontent-%COMP%]{width:auto}"]});let o=i;return o})();export{me as InsuranceCompanyComponent};
